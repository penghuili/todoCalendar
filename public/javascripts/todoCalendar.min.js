!function(){function e(e,t){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/todo",{templateUrl:"todo/todo.view.html",controller:"todoCtrl",controllerAs:"vm"}).when("/todo/:id",{templateUrl:"todoDetail/todoDetail.view.html",controller:"todoDetailCtrl",controllerAs:"vm"}).when("/add",{templateUrl:"todoAdd/todoAdd.view.html",controller:"todoAddCtrl",controllerAs:"vm"}).when("/calendar",{templateUrl:"calendar/calendar.view.html",controller:"calendarCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),t.html5Mode(!0)}angular.module("todoCalendar",["ngRoute"]),e.$inject=["$routeProvider","$locationProvider"],angular.module("todoCalendar").config(["$routeProvider","$locationProvider",e])}(),function(){function e(e){var t=this;t.date=new Date,t.init=function(){$(".taskItem").remove();var n=e.timestampToDateString(t.date.getTime()),a=e.getTasks("someday",n);a.forEach(t.addTask),$(".taskItem input").on("change",function(n){var a=$(n.currentTarget).parent().attr("id"),i=a.split("_"),o=e.timestampToDateString(Number(i[0])),r=Number(i[1]),d=e.getDatabase(),l=d[o].filter(function(e){return e.createdOn===r})[0];l.completed=!l.completed,l.checkedOn=(new Date).getTime(),localStorage.setItem("database",JSON.stringify(d)),t.init()})},t.changeDate=function(){$(".taskItem").remove(),t.init()},t.addTask=function(n){var a=t.getTop(n.begin),i=t.getHeight(n.begin,n.end),o=t.getRandomColor(),r=$("<div class=taskItem></div>").css({width:"93%",height:i+"px","line-height":i+"px",border:"1px solid rgb("+o[0]+","+o[1]+","+o[2]+")","border-radius":"4px",position:"absolute",top:a+"px",left:"70px","z-index":"1"}).attr("id",n.begin.toString()+"_"+n.createdOn.toString()),d=$("<input type=checkbox checked>"),l=Number(e.timestampToDateString((new Date).getTime()))>Number(e.timestampToDateString(n.begin));n.completed||l?n.completed?r.css("background","rgba(0,255,0,0.5)"):(r.css("background","rgba(255,69,0,0.5)"),d.removeAttr("checked")):(r.css("background","rgba(127,255,212,0.5)"),d.removeAttr("checked"));var c=$("<a></a>").attr("href","/#/todo/"+n.createdOn).html(n.name);n.completed&&(c=$("<del></del>").html(c)),r.html([d,"&nbsp;",c]);var s=$("#taskBox");s.prepend(r)},t.getTop=function(e){var t=new Date(e),n=t.getHours(),a=t.getMinutes();return 2*n*41+2+82*a/60},t.getHeight=function(e,n){var a=t.getTop(e),i=t.getTop(n);return i-a-3},t.getRandomColor=function(){var e=t.getRandomNum(),n=t.getRandomNum(),a=t.getRandomNum();return[e,n,a]},t.getRandomNum=function(){return Math.floor(255*Math.random()+1)}}angular.module("todoCalendar").controller("calendarCtrl",e),e.$inject=["utils"]}(),function(){function e(){var e=this;e.title="TodoCalendar"}angular.module("todoCalendar").controller("homeCtrl",e)}(),function(){function e(e){var t=this;t.checkedDevice=!1,t.init=function(){if(t.inboxs=e.getTasks("inbox"),t.todays=e.getTasks("today"),t.completeds=e.getTasks("completed"),t.alls=e.getTasks("all"),!t.checkedDevice){var n=$("#navBtn").css("display");"none"===n?($(".panel-collapse.collapse").addClass("in"),$(".panel-heading a").attr("href","#").hover(function(){$(this).css({cursor:"default","text-decoration":"none"})})):$("#todoList").css("height","auto"),t.checkedDevice=!0}},t.change=function(n){var a;"inbox"===n?(a=t.getCheckedTask(t.inboxs,!0),e.updateTask(a)):"today"===n?(a=t.getCheckedTask(t.todays,!0),e.updateTask(a)):"all"===n?(a=t.getCheckedTaskInAll(t.alls),e.updateTask(a)):"completed"===n&&(a=t.getCheckedTask(t.completeds,!1),e.updateTask(a)),t.init()},t.getCheckedTask=function(e,t){return e.filter(function(e){return e.completed===t})[0]},t.getCheckedTaskInAll=function(e){for(var n,a=e.length,i=0;i<a;i++)if(n=t.getCheckedTask(e[i].tasks,!0))return n}}angular.module("todoCalendar").controller("todoCtrl",e),e.$inject=["utils"]}(),function(){function e(e,t){var n=this;n.newTask="",n.begin={liStatus:"active",date:"Begins on",dateRaw:"",time:"Begins at",timeRaw:"",contentStatus:"tab-pane active"},n.end={liStatus:"",date:"Ends on",dateRaw:"",time:"Ends at",timeRaw:"",contentStatus:"tab-pane"},n.clickEnd=function(){n.end.liStatus="active",n.end.contentStatus="tab-pane active",n.begin.liStatus="",n.begin.contentStatus="tab-pane"},n.clickBegin=function(){n.begin.liStatus="active",n.begin.contentStatus="tab-pane active",n.end.liStatus="",n.end.contentStatus="tab-pane"},n.change=function(){n.begin.dateRaw&&(n.begin.date=t.timestampToDateWithSlash(n.begin.dateRaw.getTime())),n.begin.timeRaw&&(n.begin.time=t.timestampToTimeWithAM(n.begin.timeRaw.getTime())),n.end.dateRaw&&(n.end.date=t.timestampToDateWithSlash(n.end.dateRaw.getTime())),n.end.timeRaw&&(n.end.time=t.timestampToTimeWithAM(n.end.timeRaw.getTime()))},n.onSubmit=function(){t.saveNewTask(n.newTask,n.begin.dateRaw,n.begin.timeRaw,n.end.dateRaw,n.end.timeRaw),e.path("/todo")}}angular.module("todoCalendar").controller("todoAddCtrl",e),e.$inject=["$location","utils"]}(),function(){function e(e,t,n){var a=this;a.raw={},a.id=Number(e.id),a.begin={liStatus:"active",contentStatus:"tab-pane active",date:"Begins on",time:"Begins at"},a.end={liStatus:"",contentStatus:"tab-pane",date:"Begins on",time:"Begins at"},a.clickEnd=function(){a.end.liStatus="active",a.end.contentStatus="tab-pane active",a.begin.liStatus="",a.begin.contentStatus="tab-pane"},a.clickBegin=function(){a.begin.liStatus="active",a.begin.contentStatus="tab-pane active",a.end.liStatus="",a.end.contentStatus="tab-pane"};var i=t.getTaskById(a.id);i&&(a.newTask=i.name,a.completed=i.completed,a.raw.name=i.name,a.raw.completed=i.completed,i.begin&&(a.begin.dateRaw=new Date(i.begin),a.begin.timeRaw=new Date(i.begin),a.begin.date=t.timestampToDateWithSlash(i.begin),a.begin.time=t.timestampToTimeWithAM(i.begin),a.end.dateRaw=new Date(i.end),a.end.timeRaw=new Date(i.end),a.end.date=t.timestampToDateWithSlash(i.end),a.end.time=t.timestampToTimeWithAM(i.end),a.raw.beginDateRaw=new Date(i.begin),a.raw.endDateRaw=new Date(i.end))),a.changed=function(){return a.raw.name!==a.newTask||a.raw.completed!==a.completed||a.raw.beginDateRaw!==a.begin.dateRaw||a.raw.beginDateRaw!==a.begin.timeRaw||a.raw.endDateRaw!==a.end.dateRaw||a.raw.endDateRaw!==a.end.timeRaw},a.onSubmit=function(){a.changed()&&(t.deleteTaskById(a.id),t.saveToWithDate(a.newTask,a.begin.dateRaw,a.begin.timeRaw,a.end.dateRaw,a.end.timeRaw,a.completed)),n.path("/todo")},a["delete"]=function(){var e;a.begin.dateRaw&&(e=t.timestampToDateString(a.begin.dateRaw.getTime())),t.deleteTaskById(a.id,e),n.path("/todo")}}angular.module("todoCalendar").controller("todoDetailCtrl",e),e.$inject=["$routeParams","utils","$location"]}(),function(){function e(){var e=function(e){return e<10?"0"+e.toString():e.toString()},t=function(t){return t>12?[e(t-12),"PM"]:[e(t),"AM"]},n=function(e,t){var n=t.getHours(),a=t.getMinutes();return e.getTime()+6e4*(60*n+a)},a=function(){return JSON.parse(localStorage.getItem("database"))||{}},i=function(t){var n=new Date(t),a=n.getFullYear().toString(),i=e(n.getMonth()+1),o=e(n.getDate());return a+i+o},o=function(t){var n=new Date(t),a=n.getFullYear().toString(),i=e(n.getMonth()+1),o=e(n.getDate());return i+"/"+o+"/"+a},r=function(n){var a=new Date(n),i=t(a.getHours()),o=e(a.getMinutes());return i[0]+":"+o+" "+i[1]},d=function(e,t){var n=function(e,t){return"inbox"===t?e.sort(function(e,t){return t.createdOn-e.createdOn}):e.sort(function(e,t){return t.begin-e.begin})},r=function(e,t,a){var i=e.filter(function(e){return e.completed===t});return n(i,a)},d=function(e,t){var a=[];if(t){for(var i in e)a=a.concat(r(e[i],t));return n(a,"completed")}var d=Object.keys(e),l=d.indexOf("inbox");l>-1&&d.splice(l,1),d=d.sort();for(var c=d.length,s=0,u=0;u<c;u++)a[s]={},a[s].tasks=r(e[d[u]],t,"all"),a[s].tasks.length>0&&(a[s].date=o(new Date(a[s].tasks[0].begin).getTime()),s++);var m=a.length;return c>0&&a[m-1].tasks.length<1&&a.splice(m-1,1),a},l=a(),c=[];if("inbox"===e){var s=l.inbox||[];c=r(s,!1,"inbox")}else if("today"===e){var u=i((new Date).getTime()),m=l[u]||[];c=r(m,!1,"today")}else c="all"===e?d(l,!1):"completed"===e?d(l,!0):"someday"===e?l[t]:[];return c},l=function(e,t){var n,i=a(),o=function(t){return t.createdOn===e};if(t){if(n=i[t].filter(o)[0])return n}else for(var r in i)if(n=i[r].filter(o)[0])return n;return null},c=function(e,t,o,r,d,l){l=l||!1;var c=a();if(!e||t&&o&&r&&d){var s=n(new Date(t),new Date(o)),u=n(new Date(r),new Date(d)),m=i(s);c[m]=c[m]||[],c[m].unshift({name:e,createdOn:(new Date).getTime(),completed:l,begin:s,end:u})}else c.inbox=c.inbox||[],c.inbox.unshift({name:e,createdOn:(new Date).getTime(),completed:l});localStorage.setItem("database",JSON.stringify(c))},s=function(e){var t,n=a();if(e.begin){var o=i(e.begin);t=n[o].filter(function(t){return t.createdOn===e.createdOn})[0]}else t=n.inbox.filter(function(t){return t.createdOn===e.createdOn})[0];t.completed=!t.completed,t.checkedOn=(new Date).getTime(),localStorage.setItem("database",JSON.stringify(n))},u=function(e,t){var n,i,o=a(),r=function(t){return t.createdOn===e};if(t){if(n=o[t].filter(r)[0])return i=o[t].indexOf(n),o[t].splice(i,1),localStorage.setItem("database",JSON.stringify(o)),n}else for(var d in o)if(n=o[d].filter(r)[0])return i=o[d].indexOf(n),o[d].splice(i,1),localStorage.setItem("database",JSON.stringify(o)),n;return null};return{timestampToDateString:i,timestampToDateWithSlash:o,timestampToTimeWithAM:r,getDatabase:a,getTasks:d,getTaskById:l,saveNewTask:c,updateTask:s,deleteTaskById:u}}angular.module("todoCalendar").service("utils",e)}(),function(){function e(){return{templateUrl:"common/directive/footerGeneric/footerGeneric.view.html"}}angular.module("todoCalendar").directive("footerGeneric",e)}(),function(){function e(){var e=this;e.hidePanelBody=function(){$(".navbar-toggle").click()}}angular.module("todoCalendar").controller("navigationCtrl",e)}(),function(){function e(){return{templateUrl:"common/directive/navigation/navigation.view.html",controller:"navigationCtrl as navvm"}}angular.module("todoCalendar").directive("navigation",e)}();