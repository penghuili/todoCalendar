!function(){function e(e,t){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/todo",{templateUrl:"todo/todo.view.html",controller:"todoCtrl",controllerAs:"vm"}).when("/todo/:id",{templateUrl:"todoDetail/todoDetail.view.html",controller:"todoDetailCtrl",controllerAs:"vm"}).when("/add",{templateUrl:"todoAdd/todoAdd.view.html",controller:"todoAddCtrl",controllerAs:"vm"}).when("/calendar",{templateUrl:"calendar/calendar.view.html",controller:"calendarCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),t.html5Mode(!0)}angular.module("todoCalendar",["ngRoute"]),e.$inject=["$routeProvider","$locationProvider"],angular.module("todoCalendar").config(["$routeProvider","$locationProvider",e])}(),function(){function e(e){var t=this;t.date=new Date,t.init=function(){$(".taskItem").remove();var n=JSON.parse(localStorage.getItem("withDate")),a=e.getTasks(n,[e.parseDate(t.date)]);a.forEach(t.addTask),$(".taskItem input").on("change",function(e){var n=$(e.currentTarget).parent().attr("id"),a=n.substring(0,8),i=Number(n.substring(8)),o=JSON.parse(localStorage.getItem("withDate")),r=o[a].filter(function(e){return e.createdOn===i})[0];r.completed=!r.completed,r.checkedOn=(new Date).getTime(),localStorage.setItem("withDate",JSON.stringify(o)),t.init()})},t.changeDate=function(){$(".taskItem").remove(),t.init()},t.addTask=function(n){var a=n.beginTime.split(" "),i=n.endTime.split(" "),o=t.getTop(a),r=t.getHeight(a,i),d=t.getRandomColor(),c=$("<div class=taskItem></div>").css({width:"93%",height:r+"px","line-height":r+"px",border:"1px solid rgb("+d[0]+","+d[1]+","+d[2]+")","border-radius":"4px",position:"absolute",top:o+"px",left:"70px","z-index":"1"}).attr("id",n.beginDate+n.createdOn),l=$("<input type=checkbox checked>"),s=Number(e.parseDate(new Date))>Number(n.beginDate);n.completed||s?n.completed?c.css("background","rgba(0,255,0,0.5)"):(c.css("background","rgba(255,69,0,0.5)"),l.removeAttr("checked")):(c.css("background","rgba(127,255,212,0.5)"),l.removeAttr("checked")),c.html([l,"&nbsp;",n.name]);var u=$("#taskBox");u.prepend(c)},t.getTop=function(e){var n=t.getHourAndMinute(e),a=2*n[0]*41+2+82*n[1]/60;return a},t.getHeight=function(e,n){var a=t.getTop(e),i=t.getTop(n);return i-a-3},t.getHourAndMinute=function(e){var t=e[0].split(":"),n=Number(t[0]),a=Number(t[1]);return"PM"===e[1]&&(n+=12),[n,a]},t.getRandomColor=function(){var e=t.getRandomNum(),n=t.getRandomNum(),a=t.getRandomNum();return[e,n,a]},t.getRandomNum=function(){return Math.floor(255*Math.random()+1)}}angular.module("todoCalendar").controller("calendarCtrl",e),e.$inject=["utils"]}(),function(){function e(){var e=this;e.title="TodoCalendar"}angular.module("todoCalendar").controller("homeCtrl",e)}(),function(){function e(e){var t=this;t.init=function(){var n=new Date,a=JSON.parse(localStorage.getItem("inbox"))||[],i=JSON.parse(localStorage.getItem("withDate"))||{},o=[e.parseDate(n)],r=e.getUpcomingArr(n,3),d=Object.keys(i).sort().reverse();t.inboxs=e.getTasks(a,[],!1),t.todays=e.getTasks(i,o,!1),t.upcomings=e.getTasks(i,r,!1),t.completeds=e.getTasks(i,d,!0).concat(e.getTasks(a,[],!0)).sort(function(e,t){return t.checkedOn-e.checkedOn}),t.alls=e.getTasks(i,d,!1).concat(e.getTasks(a,[],!1)).sort(function(e,t){return t.createdOn-e.createdOn})},t.change=function(e){var n;"inbox"===e?(n=t.getChecked(t.inboxs,!0),t.saveStatusInInbox(n)):"today"===e?(n=t.getChecked(t.todays,!0),t.saveStatusInWithDate(n)):"upcoming"===e?(n=t.getChecked(t.upcomings,!0),t.saveStatusInWithDate(n)):"all"===e?(n=t.getChecked(t.alls,!0),n.beginDate?t.saveStatusInWithDate(n):t.saveStatusInInbox(n)):"completed"===e&&(n=t.getChecked(t.completeds,!1),n.beginDate?t.saveStatusInWithDate(n):t.saveStatusInInbox(n)),t.init()},t.getChecked=function(e,t){return e.filter(function(e){return e.completed===t})[0]},t.saveStatusInInbox=function(e){var t=JSON.parse(localStorage.getItem("inbox"))||[],n=t.filter(function(t){return t.createdOn===e.createdOn})[0];n.completed=!n.completed,n.checkedOn=(new Date).getTime(),localStorage.setItem("inbox",JSON.stringify(t))},t.saveStatusInWithDate=function(e){var t=JSON.parse(localStorage.getItem("withDate"))||{},n=e.beginDate.split("/"),a=n[2]+n[0]+n[1],i=t[a].filter(function(t){return t.createdOn===e.createdOn})[0];i.completed=!i.completed,i.checkedOn=(new Date).getTime(),localStorage.setItem("withDate",JSON.stringify(t))}}angular.module("todoCalendar").controller("todoCtrl",e),e.$inject=["utils"]}(),function(){function e(e,t){var n=this;n.newTask="",n.begin={liStatus:"active",date:"Begins on",dateRaw:"",time:"Begins at",timeRaw:"",contentStatus:"tab-pane active"},n.end={liStatus:"",date:"Ends on",dateRaw:"",time:"Ends at",timeRaw:"",contentStatus:"tab-pane"},n.clickEnd=function(){n.end.liStatus="active",n.end.contentStatus="tab-pane active",n.begin.liStatus="",n.begin.contentStatus="tab-pane"},n.clickBegin=function(){n.begin.liStatus="active",n.begin.contentStatus="tab-pane active",n.end.liStatus="",n.end.contentStatus="tab-pane"},n.change=function(){n.begin.dateRaw&&(n.begin.date=t.addSlash(t.parseDate(n.begin.dateRaw))),n.begin.timeRaw&&(n.begin.time=t.parseTime(n.begin.timeRaw)),n.end.dateRaw&&(n.end.date=t.addSlash(t.parseDate(n.end.dateRaw))),n.end.timeRaw&&(n.end.time=t.parseTime(n.end.timeRaw))},n.onSubmit=function(){!n.newTask||n.begin.dateRaw&&n.begin.timeRaw&&n.end.dateRaw&&n.end.timeRaw?(t.saveToWithDate(n.newTask,n.begin.dateRaw,n.begin.timeRaw,n.end.dateRaw,n.end.timeRaw),e.path("/todo")):(t.saveToInbox(n.newTask),e.path("/todo"))}}angular.module("todoCalendar").controller("todoAddCtrl",e),e.$inject=["$location","utils"]}(),function(){function e(e,t,n){var a=this;a.raw={},a.id=Number(e.id),a.begin={liStatus:"active",contentStatus:"tab-pane active",date:"Begins on",time:"Begins at"},a.end={liStatus:"",contentStatus:"tab-pane",date:"Begins on",time:"Begins at"},a.clickEnd=function(){a.end.liStatus="active",a.end.contentStatus="tab-pane active",a.begin.liStatus="",a.begin.contentStatus="tab-pane"},a.clickBegin=function(){a.begin.liStatus="active",a.begin.contentStatus="tab-pane active",a.end.liStatus="",a.end.contentStatus="tab-pane"},a.getBeginAndEndDate=function(e){var t=e.beginDate,n=e.beginTime,i=e.endDate,o=e.endTime,r=a.numToDate(t,n),d=a.numToDate(i,o);return[r,d]},a.numToDate=function(e,t){var n=e.substring(0,4),a=Number(e.substring(4,6))-1,i=e.substring(6),o=t.substring(0,2),r=t.substring(3,5),d=t.substring(6);return"PM"===d&&(o=Number(o)+12),new Date(n,a,i,o,r)};var i=t.getTaskById(a.id);if(i&&(a.newTask=i.name,a.completed=i.completed,a.raw.name=i.name,a.raw.completed=i.completed,i.beginDate)){var o=a.getBeginAndEndDate(i);a.begin.date=t.addSlash(i.beginDate),a.begin.time=i.beginTime,a.begin.dateRaw=o[0],a.begin.timeRaw=o[0],a.end.date=t.addSlash(i.endDate),a.end.time=i.endTime,a.end.dateRaw=o[1],a.end.timeRaw=o[1],a.raw.beginDateRaw=o[0],a.raw.beginTimeRaw=o[0],a.raw.endDateRaw=o[1],a.raw.endTimeRaw=o[1]}a.changed=function(){return a.raw.name!==a.newTask||a.raw.completed!==a.completed||a.raw.beginDateRaw!==a.begin.dateRaw||a.raw.beginTimeRaw!==a.begin.timeRaw||a.raw.endDateRaw!==a.end.dateRaw||a.raw.endTimeRaw!==a.end.timeRaw},a.onSubmit=function(){a.changed()&&(t.deleteTaskById(a.id),!a.newTask||a.begin.dateRaw&&a.begin.timeRaw&&a.end.dateRaw&&a.end.timeRaw?t.saveToWithDate(a.newTask,a.begin.dateRaw,a.begin.timeRaw,a.end.dateRaw,a.end.timeRaw,a.completed):t.saveToInbox(a.newTask,a.completed)),n.path("/todo")},a["delete"]=function(){t.deleteTaskById(a.id),n.path("/todo")}}angular.module("todoCalendar").controller("todoDetailCtrl",e),e.$inject=["$routeParams","utils","$location"]}(),function(){function e(){var e=function(e){return e<10?"0"+e.toString():e.toString()},t=function(t){return t>12?[e(t-12),"PM"]:[e(t),"AM"]},n=function(e){var t=e.substring(0,4),n=e.substring(4,6),a=e.substring(6);return n+"/"+a+"/"+t},a=function(e,t){return e.filter(function(e){return e.createdOn===t})[0]},i=function(e,t){var n;for(var i in e)if(n=a(e[i],t))break;return n},o=function(t){var n=t.getFullYear().toString(),a=e(t.getMonth()+1),i=e(t.getDate());return n+a+i},r=function(n){var a=t(n.getHours()),i=e(n.getMinutes());return a[0]+":"+i+" "+a[1]},d=function(e,t){for(var n=new Date(e),a=[],i=0;i<t;)n.setDate(n.getDate()+1),a.unshift(o(n)),i++;return a},c=function(e,t,n){var a=[],i=t.length,o=0,r=function(e){return e.completed===n};if(void 0===n&&(r=function(e){return!0}),e.length+1)a=e.filter(r);else for(o=0;o<i;o++)e[t[o]]=e[t[o]]||[],a=a.concat(e[t[o]].filter(r));return a},l=function(e){var t,n=JSON.parse(localStorage.getItem("inbox"))||[];if(t=a(n,e),!t){var o=JSON.parse(localStorage.getItem("withDate"));t=i(o,e)}return t},s=function(e,t){t=t||!1;var n=JSON.parse(localStorage.getItem("inbox"))||[];n.unshift({name:e,createdOn:(new Date).getTime(),completed:t}),localStorage.setItem("inbox",JSON.stringify(n))},u=function(e,t,n,a,i,d){d=d||!1;var c=JSON.parse(localStorage.getItem("withDate"))||{},l=o(new Date(t)),s=r(new Date(n)),u=o(new Date(a)),g=r(new Date(i));c[l]||(c[l]=[]),c[l].unshift({name:e,createdOn:(new Date).getTime(),completed:d,beginDate:l,beginTime:s,endDate:u,endTime:g}),localStorage.setItem("withDate",JSON.stringify(c))},g=function(e){var t=-1,n=l(e);if(n.beginDate){var a=JSON.parse(localStorage.getItem("withDate")),i=a[n.beginDate];i.forEach(function(n,a){n.createdOn===e&&(t=a)}),t>-1&&i.splice(t,1),localStorage.setItem("withDate",JSON.stringify(a))}else{var o=JSON.parse(localStorage.getItem("inbox"));o.forEach(function(n,a){n.createdOn===e&&(t=a)}),t>-1&&o.splice(t,1),localStorage.setItem("inbox",JSON.stringify(o))}};return{parseDate:o,parseTime:r,getUpcomingArr:d,getTasks:c,addSlash:n,saveToInbox:s,saveToWithDate:u,getTaskById:l,deleteTaskById:g}}angular.module("todoCalendar").service("utils",e)}(),function(){function e(){return{templateUrl:"common/directive/footerGeneric/footerGeneric.view.html"}}angular.module("todoCalendar").directive("footerGeneric",e)}();